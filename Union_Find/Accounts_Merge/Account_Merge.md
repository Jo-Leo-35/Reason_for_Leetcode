## 1. 題目敘述與抽象概念

**題目簡述：**
給定一份帳戶列表，每個帳戶包含一個名稱和若干電子郵件。如果兩個帳戶有至少一個共同的電子郵件，則這兩個帳戶屬於同一個人。我們需要合併這些帳戶，並按名稱排序返回，電子郵件內部也需排序。

**抽象概念：**

* **節點 (Nodes)：** 每一封唯一的電子郵件。
* **邊 (Edges)：** 同一個帳戶內的電子郵件彼此相連（具備傳遞性）。
* **目標：** 找出所有互相連通的電子郵件集合，並將其與對應的使用者名稱綁定。
* **Tag：** `Union Find (並查集)`, `DFS/BFS`, `Graph`, `Hash Table`

---

## 2. 演算法比較：你的解法 vs. 其他最優解

你使用的 **Union Find (並查集)** 是處理這類連通性問題的最佳實踐。

| 特性 | Union Find (你的解法) | DFS / BFS (圖遍歷) |
| --- | --- | --- |
| **核心邏輯** | 透過 `union` 建立電子郵件間的父子關係，並用 `find` 壓縮路徑找出根節點。 | 建立鄰接表 (Adjacency List)，對每個未訪問郵件進行搜索，找出所有相連點。 |
| **優點** | 程式碼結構清晰，處理動態連通性非常高效。 | 邏輯直觀，適合已經習慣圖論搜索的人。 |
| **複雜度** | , 其中  為反阿克曼函數（近乎常數）。 | , 主要瓶頸在於最後的排序。 |
| **空間複雜度** |  用於儲存 `groups` 和 `email_to_name`。 |  用於儲存鄰接表與訪問標記。 |

> **註：**  為帳戶數， 為每個帳戶平均 Email 數。

---

## 3. 微系統設計上的應用

在實際系統架構中，這種「帳戶合併」或「實體對齊 (Entity Resolution)」的算法非常常見：

1. **使用者畫像標籤 (User Profiling)：** 當一個人在不同平台使用不同 Email 註冊，但曾在某個第三方支付工具綁定了這兩組 Email。系統可以透過 Union Find 將這些孤立的帳號節點串連，合併為同一個「數位指紋」。
2. **詐騙偵測 (Fraud Detection)：** 電商平台偵測惡意刷單。如果多個帳號共享同一個收貨電話、同一個 IP 地址或同一張信用卡，系統會將這些帳號視為同一個「詐騙團體 (Fraud Ring)」，此時這就是一個連通分量計算問題。
3. **社交網路好友推薦：** 識別「你可能認識的人」。如果 A 與 B 有共同聯繫方式，透過連通性分析可以推導出其潛在的社交鏈結。

---

## 4. Following Up：延伸題型與題目

掌握了 Union Find 和帳戶合併的邏輯後，建議挑戰以下相關題目以鞏固觀念：

### 延伸算法題

* **LeetCode 547. Number of Provinces：** 最基礎的 Union Find 題，求有多少個獨立的圈子。
* **LeetCode 684. Redundant Connection：** 找出圖中導致環出現的那條邊，進一步理解 Union Find 的偵測機制。
* **LeetCode 990. Satisfiability of Equality Equations：** 處理變數間的「等於」與「不等於」關係，這是帳戶合併邏輯的變體應用。

### 面試 Follow-up Questions (Google 風格)

1. **Scalability (擴展性)：** 如果 `accounts` 資料量巨大到單機記憶體放不下 (例如有 10 億個帳號)，你會如何處理？
* *提示：* 使用 MapReduce 架構，將 Email Pair 進行分散式 Union 分組。


2. **Constraint Change (約束變動)：** 如果現在規定「只有當兩帳戶有 2 個以上共同 Email 時才合併」，Union Find 還適用嗎？
* *提示：* 這會變得很難直接用 Union Find，可能需要考慮建立 Email 索引後，再透過圖的邊界條件 (Graph Edges with weight) 來解。


3. **Data Consistency (一致性)：** 帳號合併後，如果某個關聯 Email 被刪除了，該如何「拆分」已合併的群組？
* *提示：* Union Find 很擅長合併，但不擅長「拆分」。這通常需要重新構建圖或使用動態連通性演算法。
